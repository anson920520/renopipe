(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-record-edit"],{"0364":function(e,t,n){"use strict";var a=n("ee27");n("99af"),n("ace4"),n("d3b7"),n("ac1f"),n("3ca3"),n("466d"),n("5319"),n("1276"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ddb0"),n("2b3d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("f3f3")),o=a(n("c9e9"));n("96cf");var r=a(n("c964")),s=a(n("276c")),c=a(n("e954")),d=function(){function e(){(0,s.default)(this,e),this.FunChunk={0:{file:this.app_appendFile,toPath:this.app_URLtoBitmap},1:{file:this.h5_appendFile,toPath:this.h5_URLtoBlob},2:{file:this.applet_appendFile,toPath:this.applet_URLtoPath}},this.platform=this.platformChunk()}return(0,c.default)(e,[{key:"platformChunk",value:function(){switch(uni.getSystemInfoSync().platform){case"android":case"ios":return"undefined"!=typeof plus?0:1;default:return 2}}},{key:"dataURLtoBlob",value:function(){var e=(0,r.default)(regeneratorRuntime.mark((function e(){var t,n,a,r,s,c,d,u,l,h,f,p,v,m=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},n=t.GetBase64,a=void 0!==n&&n,r=t.filename,s=void 0===r?"HHYANG":r,c=t.format,d=void 0===c?"png":c,u=t.compress,l=void 0===u?1:u,h=(0,o.default)(t,["GetBase64","filename","format","compress"]),f=this.FunChunk[this.platform],e.next=4,f.file((0,i.default)({format:d,compress:l},h));case 4:if(p=e.sent,!a){e.next=7;break}return e.abrupt("return",p);case 7:return e.next=9,f.toPath({base64:p,filename:s,format:d});case 9:return v=e.sent,e.abrupt("return",v);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"h5_URLtoBlob",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.base64,n=e.filename,a=e.resolvePath,i=void 0===a||a;return new Promise((function(e){var a=t.split(","),o=a[0].match(/:(.*?);/)[1],r=atob(a[1]),s=r.length,c=new Uint8Array(s);while(s--)c[s]=r.charCodeAt(s);var d=new File([c],"".concat(n,".").concat(o.split("/")[1]),{type:o}),u=d;i&&(u=(window.URL||window.webkitURL).createObjectURL(d)),e(u)}))}},{key:"h5_appendFile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=void 0===t?"":t,a=e.format,i=void 0===a?"png":a,r=e.compress,s=void 0===r?1:r;(0,o.default)(e,["path","format","compress"]);return new Promise((function(e,t){var a=new Image;a.setAttribute("crossOrigin","Anonymous"),a.src=n,a.onload=function(){var t=this.width,n=this.height,a=document.createElement("canvas"),o=a.getContext("2d");a.setAttribute("width",t),a.setAttribute("height",n),o.drawImage(this,0,0,t,n);var r=a.toDataURL("image/jpeg",s);r=r.replace(/^data\:image.{0,}base64,/i,"data:image/".concat(i,";base64,")),e(r)},a.onerror=function(e){t(e)}}))}},{key:"app_URLtoBitmap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.base64,n=e.filename,a=void 0===n?"HHYANG":n,i=e.format,o=void 0===i?"png":i;return new Promise((function(e,n){var i=new plus.nativeObj.Bitmap("HHYANG_BITMAP)");i.loadBase64Data(t,(function(t){i.save("_doc/".concat(a,".").concat(o),{overwrite:!0},(function(t){e(t),i.clear()}),(function(e){n("检查文件是否已经存在:".concat(e)),i.clear()}))}),(function(e){n("base64加载失败"),i.clear()}))}))}},{key:"app_appendFile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=void 0===t?"":t,a=e.format,i=void 0===a?"png":a,s=e.isNet,c=void 0!==s&&s,d=e.compress,u=void 0===d?1:d,l=((0,o.default)(e,["path","format","isNet","compress"]),new Promise((function(e,t){if(!c)return e(n);var a=plus.downloader.createDownload(n,{},(function(n,a){200==a?e(n.filename):t(a)}));a.start()}))),h=function(e,t,n){return new Promise((function(a,i){if(1==n)return a({target:e});plus.zip.compressImage({src:e,dst:"_doc/HHYANG.".concat(t),overwrite:!0,quality:100*n,width:"50%",height:"50%"},(function(e){a(e)}),(function(e){i(e)}))}))},f=function(e,t){return new Promise((function(n,a){var i=new plus.nativeObj.Bitmap("HHYANG_BITMAP)");i.load(e,(function(e){var a=i.toBase64Data();n(a.replace(/^data\:image\/.{0,}\;/i,"data:image/".concat(t,";"))),i.clear()}),(function(e){i.clear(),a(e)}))}))};return new Promise((function(e,t){l.then(function(){var n=(0,r.default)(regeneratorRuntime.mark((function n(a){var o,r,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=null,n.prev=1,n.next=4,h(a,i,u);case 4:return r=n.sent,s=r.target,n.next=8,f(s,i);case 8:c=n.sent,o=s,e(c),n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](1),o=a,t(n.t0);case 17:1!=u&&plus.io.resolveLocalFileSystemURL(o,(function(e){return e.remove()}));case 18:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){t("网络路径可能链接不通：".concat(e))}))}))}},{key:"applet_URLtoPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.base64,n=e.filename,a=void 0===n?"HHYANG":n,i=e.format,o=void 0===i?"png":i;return new Promise((function(e,n){if("undefined"===typeof wx)return n('很抱歉，小程序系列目前仅支持"微信小程序"');if(!wx.canIUse("getFileSystemManager"))return n("当前小程序版本API不可用");var i=wx.getFileSystemManager(),r="".concat(wx.env.USER_DATA_PATH,"/").concat(a,".").concat(o);i.writeFile({filePath:r,data:t.replace(/^data.{0,}base64,/,""),encoding:"base64",success:function(){e(r)},fail:function(e){n(e)}})}))}},{key:"applet_appendFile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=void 0===t?"":t,a=e.format,i=void 0===a?"png":a,r=e.isNet,s=void 0!==r&&r;(0,o.default)(e,["path","format","isNet"]);return new Promise((function(e,t){if("undefined"===typeof wx)return t('很抱歉，小程序系列目前仅支持"微信小程序"');if(!wx.canIUse("getFileSystemManager")||!wx.canIUse("downloadFile"))return t("当前小程序版本API不可用");var a=new Promise((function(e,t){if(!s)return e(n);wx.downloadFile({url:n,success:function(n){200===n.statusCode?e(n.tempFilePath):t(n)},fail:function(e){t(e)}})})),o=function(e,t){return new Promise((function(n,a){var i=wx.getFileSystemManager();i.readFile({filePath:e,encoding:"base64",success:function(e){n("data:image/".concat(t,";base64,").concat(e.data))},fail:function(e){n(e)}})}))};a.then((function(n){o(n,i).then((function(t){e(t)})).catch((function(e){t("读取文件失败：".concat(e))}))})).catch((function(e){t("网络路径可能链接不通：".concat(e))}))}))}}]),e}(),u=d;t.default=u},"0875":function(e,t,n){"use strict";n.r(t);var a=n("21d5"),i=n("f224");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("6707");var r,s=n("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"f7edae34",null,!1,a["a"],r);t["default"]=c.exports},"1de5":function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),e=e&&e.__esModule?e.default:e,"string"!==typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},"1efb":function(e,t,n){var a=n("24fb"),i=n("1de5"),o=n("61f2"),r=n("b9f0");t=a(!1);var s=i(o),c=i(r);t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */body[data-v-f7edae34]{font-family:Abel}\n/*header的style*/.nav-background[data-v-f7edae34]{background:#5f98ec}.mt25[data-v-f7edae34]{margin-top:25px}\n/*header的button的css*/.menu-btn[data-v-f7edae34]{width:.9rem;height:.9rem;padding:10px;cursor:pointer}.logoBox[data-v-f7edae34]{width:40%;height:%?150?%;background:url('+s+") no-repeat;background-size:100%;background-position:40% 20%;margin-left:.5rem}.title-padding[data-v-f7edae34]{padding:0 .7rem;margin-bottom:.4rem}.body-padding[data-v-f7edae34]{padding:0 .7rem}.btn-color[data-v-f7edae34]{background:#3a75bb;color:#fff}.main[data-v-f7edae34]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.worker-main[data-v-f7edae34]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:10px}.customize-btn[data-v-f7edae34]{padding:.3rem}.hr-line[data-v-f7edae34]{margin-top:10px;color:#e9e8e8}.title[data-v-f7edae34]{font-size:1rem;color:grey}.scoll[data-v-f7edae34]{overflow-x:scroll;overflow:-moz-scrollbars-vertical;height:16rem}h3[data-v-f7edae34]{color:grey}p[data-v-f7edae34]{line-height:1.5rem;color:grey}select[data-v-f7edae34]{padding:.2rem}table[data-v-f7edae34]{width:100%;margin-top:.5rem}table[data-v-f7edae34], th[data-v-f7edae34], td[data-v-f7edae34]{border:1px solid #000;border-collapse:collapse}th[data-v-f7edae34], td[data-v-f7edae34]{padding:15px;text-align:left;font-size:.5rem}table#t01 tr[data-v-f7edae34]:nth-child(even){background-color:#f8fcff}table#t01 tr[data-v-f7edae34]:nth-child(odd){background-color:#f8fcff}table#t01 th[data-v-f7edae34]{background-color:#3a75bb;color:#fff;height:.5rem}tr#header[data-v-f7edae34]{line-height:.1rem}.loginWrap[data-v-f7edae34]{min-height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.btmBorder[data-v-f7edae34]{font-size:.6rem;border-bottom:solid 20px #5f98ec;width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.Wrap[data-v-f7edae34]{min-height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.blue-divider[data-v-f7edae34]{border-bottom:1px solid #5f98ec;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;width:100%}.hr[data-v-f7edae34]{padding:0 8rem 0 8rem;margin-top:20px;margin-bottom:20px}.border[data-v-f7edae34]{border:1px solid #e8e8e8;background:#f7f7f7}b[data-v-f7edae34]{font-size:1.5rem}.worker-info-area[data-v-f7edae34]{padding:1rem}.chk-box-area[data-v-f7edae34]{padding:1.2rem}.worker-icon[data-v-f7edae34]{height:50px;width:50px}.worktype-info-area[data-v-f7edae34]{padding:1.3rem .5rem}.worktype[data-v-f7edae34]{font-size:1.2rem}hr[data-v-f7edae34]{color:#e8e8e8;border:solid 1px}.mt20[data-v-f7edae34]{margin-top:20px}.jobTag[data-v-f7edae34]{background:#007aff;color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;padding:%?10?% %?20?%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.textarea-padding[data-v-f7edae34]{width:100%;border:solid 1px #e8e8e8}.centerBtn[data-v-f7edae34]{width:%?300?%;border:solid;background:#007aff;margin:%?30?% auto;padding:%?15?%;color:#fff}.submit-padding[data-v-f7edae34]{padding:.5rem}.uploadBtn[data-v-f7edae34]{display:inline;padding:%?10?% %?20?%;background:#007aff;border-radius:%?10?%;color:#fff;margin:%?15?% 0}.imgsWrap[data-v-f7edae34]{-webkit-flex-wrap:wrap;flex-wrap:wrap}.upLoadImg[data-v-f7edae34]{width:100%;height:%?230?%}.imgBox[data-v-f7edae34]{width:33%;border-right:solid 1px #fff}.selectType[data-v-f7edae34]{width:100%}.checkBox[data-v-f7edae34]{border:solid #1296db 1px;width:%?40?%;height:%?40?%}.checkBoxIcon[data-v-f7edae34]{width:100%}.check[data-v-f7edae34]{background:url("+c+");background-position:50%;background-size:cover}.selectpadding[data-v-f7edae34]{padding:.3rem;position:relative;top:2px}uni-input[data-v-f7edae34]{border:solid 1px #d3d3d3;margin-bottom:1rem}.selectPosition[data-v-f7edae34]{background:#007aff;padding:%?10?% %?20?%;color:#fff;width:50vw}.positionIcon[data-v-f7edae34]{width:0;height:0;border:solid %?15?% transparent;border-top:%?15?% #fff solid;-webkit-transform:translateY(%?13?%);transform:translateY(%?13?%)}.whiteColor[data-v-f7edae34]{color:#fff}",""]),e.exports=t},"21d5":function(e,t,n){"use strict";var a={cpimg:n("534a").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"Wrap sb la"},[a("Header"),a("cpimg",{ref:"cpimg",attrs:{number:2,fixOrientation:!0,size:500,maxWidth:1e3,ql:.1,type:"url"},on:{result:function(t){arguments[0]=t=e.$handleEvent(t),e.cpimgOk.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"flex10"},[a("v-uni-view",{staticClass:"title-padding mt25"},[a("div",{staticClass:"main"},[a("p",{staticClass:"title"},[e._v("編輯工作紀錄")]),a("div",{staticClass:"btn-color customize-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toHome.apply(void 0,arguments)}}},[e._v("返回")])]),a("hr",{staticClass:"hr-line"})]),a("v-uni-view",{staticClass:"body-padding"},[a("p",[e._v("工頭名稱: "+e._s(e.username))]),a("v-uni-picker",{attrs:{mode:"date"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.startTime.apply(void 0,arguments)}}},[a("v-uni-view",[e._v("今日日期: "+e._s(e.start.name))])],1),e._v("時段:"),a("span",{staticClass:"selectpadding"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.attendenceData.time,expression:"attendenceData.time"}],staticStyle:{padding:"0rem!important"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.attendenceData,"time",t.target.multiple?n:n[0])}}},[a("option",{attrs:{value:"上午"}},[e._v("上午")]),a("option",{attrs:{value:"下午"}},[e._v("下午")]),a("option",{attrs:{value:"全日"}},[e._v("全日")])])]),a("p",{staticStyle:{display:"none"}}),a("p",[e._v("工程項目編號: "+e._s(e.site.project))]),a("p",[e._v("地盤(中文名): "+e._s(e.site.cname))]),a("p",[e._v("地盤(英文名): "+e._s(e.site.name))]),a("p",[e._v("Dis1 : "+e._s(e.site.siteCode1))]),a("p",[e._v("Dis2: "+e._s(e.site.siteCode3))]),a("p",[e._v("DMA : "+e._s(e.site.dma))]),a("p",[e._v("EMFM .Ref: "+e._s(e.site.emfm))]),a("p",[e._v("Site C. TO. : "+e._s(e.site.sitetoc))]),a("p",[e._v("Imple TO. : "+e._s(e.site.imple))]),a("div",{staticClass:"hr"},[a("div",{staticClass:"blue-divider"})])],1),a("v-uni-view",{staticClass:"body-padding"},[a("div",{},[a("p",{staticClass:"title"},[e._v("工作記錄基本資料")])])]),a("v-uni-view",{staticClass:"body-padding"},[e._v("副項目編號(非必填):"),a("v-uni-input",{attrs:{placeholder:""},model:{value:e.attendenceData.subcontract,callback:function(t){e.$set(e.attendenceData,"subcontract",t)},expression:"attendenceData.subcontract"}})],1),a("v-uni-view",{staticClass:"body-padding"},[e._v("判頭:"),a("span",{},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.attendenceData.rporsubCRP,expression:"attendenceData.rporsubCRP"}],staticStyle:{padding:"0rem!important",width:"100%",border:"solid 1px lightgray","font-size":"22px"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.attendenceData,"rporsubCRP",t.target.multiple?n:n[0])},function(t){arguments[0]=t=e.$handleEvent(t),e.onChangeHead(t)}]}},[a("option",{attrs:{id:"1",value:"Renopipe"}},[e._v("Renopipe")]),a("option",{attrs:{id:"2",value:"Others"}},[e._v("外判")])])])]),a("div",{staticClass:"hr"},[a("div",{staticClass:"blue-divider"})]),a("v-uni-view",{staticClass:"body-padding"},[a("div",{},[a("p",{staticClass:"title"},[e._v("工人列表")])])]),a("v-uni-view",{staticClass:"body-padding mt20"},[a("v-uni-view",{staticClass:"sb al"},[a("div",{staticClass:"tagpad"},[a("div",{staticClass:"jobTag"},[e._v("選擇工人")])]),a("v-uni-picker",{attrs:{mode:"selector",range:e.allPosition,"range-key":"position"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.choosePosition.apply(void 0,arguments)}}},[e.allPosition.length?a("v-uni-view",{staticClass:"selectPosition sb"},[a("v-uni-view",{staticClass:"whiteColor"},[e._v(e._s(e.allPosition[e.currentPositionIndex].position))]),a("v-uni-view",{staticClass:"positionIcon"})],1):e._e()],1)],1),a("v-uni-view",[a("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"搜索工人"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.searchWorker.apply(void 0,arguments)}}})],1),"Renopipe"==e.attendenceData.rporsubCRP?a("v-uni-view",{staticClass:"border box scoll"},[e._l(e.workerList,(function(t,i){return a("div",{key:i,staticClass:"worker-main al"},[a("img",{staticClass:"worker-icon",attrs:{src:n("5fa0")}}),a("div",{staticClass:"worker-info-area"},[a("b",[e._v(e._s(t.cName)+" "+e._s(t.position))])]),a("v-uni-view",{class:["checkBox",{check:t.check}],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseWorker(i)}}})],1)})),a("hr")],2):a("v-uni-view",{staticClass:"border box scoll"},[e._l(e.allPosition,(function(t,n){return a("div",{key:n,staticClass:"worker-main al"},[a("div",{staticClass:"worker-info-area"},[a("b",[e._v(e._s(t.position))])]),a("v-uni-view",{staticClass:"ju al"},[a("v-uni-view",{staticClass:"addSubBtn ju al op",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changePositionNum(!0,n)}}},[e._v("-")]),a("v-uni-input",{staticStyle:{"margin-bottom":"0",width:"80upx","text-align":"center"},attrs:{disabled:!0,type:"number",placeholder:"1",step:"1",min:"0",max:"5"},model:{value:t.number,callback:function(n){e.$set(t,"number",n)},expression:"item.number"}}),a("v-uni-view",{staticClass:"addSubBtn ju al op",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changePositionNum(!1,n)}}},[e._v("+")])],1),a("v-uni-view",{class:["checkBox",{check:t.check}],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.checkPosition(n)}}})],1)})),a("hr")],2),a("div",{staticClass:"hr"},[a("div",{staticClass:"blue-divider"})])],1),e._l(e.otherHead,(function(t,n){return a("v-uni-view",{key:n},[a("v-uni-view",{staticClass:"body-padding"},[a("v-uni-view",{staticClass:"sb al"},[a("v-uni-view",[e._v("副判頭（可多選）:")]),a("v-uni-view",{staticClass:"delBtn op",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.delOtherHead(n)}}},[e._v("刪除")])],1),a("span",{},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.head,expression:"item.head"}],staticStyle:{padding:"0rem!important",width:"100%",border:"solid 1px lightgray","font-size":"22px"},on:{change:[function(n){var a=Array.prototype.filter.call(n.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"head",n.target.multiple?a:a[0])},function(t){arguments[0]=t=e.$handleEvent(t),e.onChangeHead()}]}},[a("option",{attrs:{id:"2",value:"信雄"}},[e._v("信雄")]),a("option",{attrs:{id:"3",value:"信昌"}},[e._v("信昌")]),a("option",{attrs:{id:"4",value:"永富"}},[e._v("永富")]),a("option",{attrs:{id:"5",value:"平安地基"}},[e._v("平安地基")]),a("option",{attrs:{id:"6",value:"六盛"}},[e._v("六盛")]),a("option",{attrs:{id:"7",value:"英昌"}},[e._v("英昌")]),a("option",{attrs:{id:"8",value:"江記"}},[e._v("江記")]),a("option",{attrs:{id:"2",value:"Others"}},[e._v("其他")])])])],1),a("v-uni-view",{staticClass:"body-padding"},[a("div",{},[a("p",{staticClass:"title"},[e._v("工人列表")]),a("u",[e._v("請選擇今天有上班的工人，如果找不到工人請致電Tesla Chong(60814693)。")])])]),a("v-uni-view",{staticClass:"body-padding mt20"},[a("v-uni-view",{staticClass:"sb al"},[a("div",{staticClass:"tagpad"},[a("div",{staticClass:"jobTag"},[e._v("選擇工人")])])]),a("v-uni-view",{staticClass:"border box scoll"},[e._l(t.position,(function(t,i){return a("div",{key:i,staticClass:"worker-main al"},[a("div",{staticClass:"worker-info-area"},[a("b",[e._v(e._s(t.position))])]),a("v-uni-view",{staticClass:"ju al"},[a("v-uni-view",{staticClass:"addSubBtn ju al op",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changePositionNum2(!0,n,i)}}},[e._v("-")]),a("v-uni-input",{staticStyle:{"margin-bottom":"0",width:"80upx","text-align":"center"},attrs:{type:"number",placeholder:"1",step:"1"},model:{value:t.number,callback:function(n){e.$set(t,"number",n)},expression:"p.number"}}),a("v-uni-view",{staticClass:"addSubBtn ju al op",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changePositionNum2(!1,n,i)}}},[e._v("+")])],1),a("v-uni-view",{class:["checkBox",{check:t.check}],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.checkPosition2(n,i)}}})],1)})),a("hr")],2),a("div",{staticClass:"hr"},[a("div",{staticClass:"blue-divider"})])],1)],1)})),a("v-uni-view",{staticClass:"centerBtn ju al op",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addOtherHeads.apply(void 0,arguments)}}},[e._v("+增加副判頭")]),a("v-uni-view",{staticClass:"body-padding"},[a("div",{},[a("p",{staticClass:"title"},[e._v("工作類型列表")])])]),a("v-uni-view",{staticClass:"body-padding mt20"},[a("v-uni-view",{staticClass:"border box scoll"},[e._l(e.worktypeOption,(function(t,n){return a("div",{key:n,staticClass:"worker-main"},[a("div",{staticClass:"worktype-info-area"},[a("p",{staticClass:"worktype"},[e._v(e._s(t.name))])]),a("div",{staticClass:"chk-box-area"},[a("v-uni-view",{class:["checkBox",{check:t.check}],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseType(n)}}})],1)])})),a("hr")],2),a("div",{staticClass:"hr"},[a("div",{staticClass:"blue-divider"})])],1),a("v-uni-view",{staticClass:"body-padding"},[a("div",{},[a("p",{staticClass:"title"},[e._v("使用機械列表")]),a("u",[e._v("請選擇今天有上使用的機械，如果找不到機械請致電Tesla Chong(60814693)。")])])]),a("v-uni-view",{staticClass:"body-padding mt20"},[a("v-uni-view",{staticClass:"border box scoll"},[e._l(e.machineOption,(function(t,n){return a("div",{key:n,staticClass:"worker-main"},[a("div",{staticClass:"worktype-info-area"},["custom"==t.type?a("v-uni-input",{staticClass:"worktype",staticStyle:{margin:"0"},attrs:{placeholder:"自行填寫"},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"item.name"}}):a("p",{staticClass:"worktype"},[e._v(e._s(t.name))])],1),a("div",{staticClass:"ju al",staticStyle:{padding:"1.3rem 0.5rem",width:"30%"}},[a("v-uni-view",{staticClass:"addSubBtn ju al op",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addSub(!0,n)}}},[e._v("-")]),a("v-uni-input",{staticStyle:{"margin-bottom":"0",width:"80upx","text-align":"center"},attrs:{disabled:!0,type:"number",placeholder:"1",step:"1",min:"0",max:"5"},model:{value:t.number,callback:function(n){e.$set(t,"number",n)},expression:"item.number"}}),a("v-uni-view",{staticClass:"addSubBtn ju al op",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addSub(!1,n)}}},[e._v("+")])],1),a("div",{staticClass:"chk-box-area"},[a("v-uni-view",{class:["checkBox",{check:t.check}],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseMachine(n)}}})],1)])})),a("hr")],2),a("div",{staticClass:"hr"},[a("div",{staticClass:"blue-divider"})])],1),a("v-uni-view",{staticClass:"body-padding"},[a("div",{},[a("p",{staticClass:"title"},[e._v("工作描述")])])]),a("v-uni-view",{staticClass:"body-padding mt20"},[a("div",{staticClass:"textarea-padding"},[a("v-uni-textarea",{attrs:{placeholder:"請輸入工作描述..."},model:{value:e.attendenceData.description,callback:function(t){e.$set(e.attendenceData,"description",t)},expression:"attendenceData.description"}})],1),a("div",{staticClass:"hr"},[a("div",{staticClass:"blue-divider"})])]),a("v-uni-view",{staticClass:"body-padding"},[a("div",{},[a("p",{staticClass:"title"},[e._v("已上載傳圖片")])]),a("v-uni-view",{staticClass:"al"},[a("v-uni-view",{staticClass:"uploadBtn op",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImg.apply(void 0,arguments)}}},[e._v("選擇圖片")])],1),a("v-uni-view",{staticClass:"imgsWrap al"},e._l(e.attendenceData.images,(function(t,i){return a("v-uni-view",{key:i,staticClass:"imgBox"},[a("v-uni-image",{staticClass:"delImg",attrs:{src:n("3ee2").replace(/^\./,""),mode:"widthFix"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.delImg2(t.ID,i)}}}),a("v-uni-image",{staticClass:"upLoadImg",attrs:{src:e.baseURL+t.filePath,mode:"aspectFill"}})],1)})),1)],1),a("v-uni-view",{staticClass:"body-padding"},[a("div",{},[a("p",{staticClass:"title"},[e._v("上傳新圖片")])]),a("v-uni-view",{staticClass:"al"},[a("v-uni-view",{staticClass:"uploadBtn op",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImg.apply(void 0,arguments)}}},[e._v("選擇圖片")])],1),a("v-uni-view",{staticClass:"imgsWrap al"},e._l(e.imgs,(function(t,i){return a("v-uni-view",{key:i,staticClass:"imgBox"},[a("v-uni-image",{staticClass:"delImg",attrs:{src:n("3ee2").replace(/^\./,""),mode:"widthFix"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.delImg(i)}}}),a("v-uni-image",{staticClass:"upLoadImg",attrs:{src:t.base64,mode:"aspectFill"}})],1)})),1)],1),a("v-uni-view",{staticClass:"submit-padding"},[a("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("編輯記錄")])],1)],2),a("v-uni-view",{staticClass:"footer btmBorder"},[e._v("©RenoPipe Construction Co. Ltd. Copyright © 2020")])],1)},o=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}))},"3ee2":function(e,t){e.exports="data:image/png;base64,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"},"5fa0":function(e,t,n){e.exports=n.p+"static/img/Users-Worker-icon.427c988b.png"},"609d":function(e,t,n){"use strict";(function(e){var a=n("ee27");n("a4d3"),n("e01a"),n("a623"),n("4de4"),n("4160"),n("caad"),n("c975"),n("a15b"),n("baa5"),n("fb6a"),n("a434"),n("a9e3"),n("e25e"),n("ac1f"),n("2532"),n("466d"),n("5319"),n("1276"),n("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("d0ff")),o=(a(n("0364")),{data:function(){return{attendenceData:"",imgs:[],description:"",workerList:[],siteList:[],siteId:"",site:{},oldWorkerIds:[],start:{name:"",timesamp:0},end:{name:"",timesamp:0},projectid:"",subcontract:"",rporsubCRP:"",machine:"",username:uni.getStorageSync("username"),supervisorId:uni.getStorageSync("userid"),selected:"",head:"Renopipe",timeRange:"上午",worktypeOption:[{name:"代工(試制)",check:!1},{name:"代工(開井蓋)",check:!1},{name:"代工(其他)",check:!1},{name:"打路面",check:!1},{name:"挖窿",check:!1},{name:"打拆",check:!1},{name:"駁水",check:!1},{name:"裝水喉",check:!1},{name:"還原",check:!1},{name:"探坑",check:!1},{name:"試制",check:!1},{name:"雜務",check:!1},{name:"其他",check:!1}],machineOption:[{name:"發電機",number:1,check:!1},{name:"大電炮",number:1,check:!1},{name:"細電炮",number:1,check:!1},{name:"保路華",number:1,check:!1},{name:"跳鎚",number:1,check:!1},{name:"震船",number:1,check:!1},{name:"9噸吊雞",number:1,check:!1},{name:"30噸吊雞",number:1,check:!1},{name:"5.5噸車",number:1,check:!1},{name:"水泵",number:1,check:!1},{name:"雞頭(4噸)",number:1,check:!1},{name:"雞頭(13噸)",number:1,check:!1},{name:"雞頭(20噸)",number:1,check:!1},{name:"火轆",number:1,check:!1},{name:"風車鋸",number:1,check:!1},{name:"風煤",number:1,check:!1},{name:"焊機",number:1,check:!1},{name:"自行填寫",number:1,check:!1,type:"custom"}],allPosition:[],currentPositionIndex:0,delImgs:[],otherHead:[]}},onLoad:function(e){this.siteId=Number(e.siteId),this.getAllPosition();var t=new Date,n=t.getFullYear(),a=t.getMonth(),i=t.getDate(),o=n+"-"+(a+1)+"-"+i;this.start.name=o,this.start.timesamp=new Date(o).getTime()/1e3;var r=new Date(Date.now()+2592e6),s=r.getFullYear(),c=r.getMonth(),d=r.getDate(),u=s+"-"+(c+1)+"-"+d;this.end.name=u,this.end.timesamp=new Date(u).getTime()/1e3},computed:{baseURL:function(){return this.$store.state.baseURL}},methods:{checkPosition:function(e){var t=this.allPosition[e];t.check=!t.check,this.allPosition.splice(e,1,t)},searchWorker:function(e){var t=[];this.allPosition.forEach((function(n){n.workers.forEach((function(n){String(n.cName).includes(e.target.value)&&t.push(n)}))})),this.workerList=t},changePositionNum:function(e,t){var n=this.allPosition[t];n.number=e?Number(n.number)-1:Number(n.number)+1,n.number<1&&(n.number=1),this.allPosition.splice(t,1,n)},delOtherHead:function(e){this.otherHead.splice(e,1)},addSub:function(e,t){e?this.machineOption[t].number--:this.machineOption[t].number++,this.machineOption[t].number<1&&(this.machineOption[t].number=1),this.machineOption[t].number>5&&(this.machineOption[t].number=5)},delImg2:function(e,t){this.delImgs.push(e),this.attendenceData.images.splice(t,1)},delImg:function(e){this.imgs.splice(e,1)},addOtherHeads:function(){if(this.allPosition.length){var e=JSON.parse(JSON.stringify(this.allPosition));e.forEach((function(e){e.number=1,e.check=!1})),this.otherHead.push({head:"",position:e})}else uni.showToast({title:"數據加載中，請稍後",icon:"none"})},changePositionNum2:function(e,t,n){e?this.otherHead[t].position[n].number--:this.otherHead[t].position[n].number++,this.otherHead[t].position[n].number<1&&(this.otherHead[t].position[n].number=1),this.otherHead=(0,i.default)(this.otherHead)},checkPosition2:function(e,t){this.otherHead[e].position[t].check=!this.otherHead[e].position[t].check,this.otherHead=(0,i.default)(this.otherHead)},checkData:function(){var t=this;setTimeout((function(){t.attendenceData.workers.forEach((function(e){var n=e.ID;t.allPosition.forEach((function(e){e.workers.forEach((function(e){n==e.ID&&(e.check=!0,t.oldWorkerIds.push(e.ID))}))}))})),t.attendenceData.worktype.split(",").forEach((function(e){t.worktypeOption.forEach((function(t){t.name==e&&(t.check=!0)}))})),t.attendenceData.machine.split(",").forEach((function(e){var n=t.machineOption.every((function(t){return t.name!=e.split(/[\d+]/)[0]}));n&&t.machineOption.splice(t.machineOption.length-1,1,{name:e.split(/[\d+]/)[0],number:1,check:!1,type:"custom"}),t.machineOption.forEach((function(n,a){if(-1!=e.indexOf(n.name)){n.check=!0;var i=1*e.match(/[\d+]/);t.machineOption[a].number=i||1}}))}));var e=t.attendenceData.remark.split(",");e.forEach((function(e,n){t.allPosition.forEach((function(t){if(e.includes(t.position)){t.check=!0;var n=/[\D+]/g,a=e.replace(n,"");t.number=1*a}}))}))}),500);var n=this.attendenceData.remark.split(";");n.pop(),e.log("remarkArr",n),n.forEach((function(e){var n=e.split(":"),a=JSON.parse(JSON.stringify(t.allPosition));a.forEach((function(e){e.number=1,e.check=!1})),a.forEach((function(e){var t=n[1].split(",");t.forEach((function(t){var n=t.split(/\d+/g);if(n[0]==e.position){e.check=!0;var a=t.match(/\d+/g);e.number=Number(a[0])}}))})),t.otherHead.push({head:n[0],position:a})}))},getData:function(){var e=this;uni.showLoading({title:"讀取中..."}),uni.request({url:e.baseURL+"attendence?id="+this.$route.query.id,method:"GET",header:{Authorization:uni.getStorageSync("token")},success:function(t){t?(e.attendenceData=t.data[0],e.getSite(t),e.checkData()):alert("記錄不存在")},complete:function(){uni.hideLoading()}})},startTime:function(e){this.start.name=e.detail.value,this.start.timesamp=new Date(e.detail.value).getTime()/1e3},endTime:function(e){this.end.name=e.detail.value,this.end.timesamp=new Date(e.detail.value).getTime()/1e3},choosePosition:function(t){var n=this,a=Number(t.detail.value);this.currentPositionIndex=a,e.log(n.currentPositionIndex),n.workerList=this.allPosition[this.currentPositionIndex].workers},getAllPosition:function(){var t=this;uni.request({url:t.baseURL+"worker?action=byRole",method:"GET",header:{Authorization:uni.getStorageSync("token")},success:function(n){e.log(n),n.data&&(t.allPosition=n.data,t.allPosition.forEach((function(e){e.workers.forEach((function(e){e.check=!1})),e.number=1,e.check=!1})),t.workerList=t.allPosition[0].workers,t.getData())}})},getSite:function(t){var n=this;uni.request({url:n.baseURL+"site",method:"GET",header:{Authorization:uni.getStorageSync("token")},success:function(a){e.log(a),a.data&&(n.siteList=a.data,n.siteList.forEach((function(e){e.ID==t.data[0].siteId&&(n.site=e)})))}})},getWorders:function(){var t=this;uni.request({url:t.baseURL+"worker",method:"GET",header:{Authorization:uni.getStorageSync("token")},success:function(n){e.log("workerList",n),t.workerList=n.data,t.workerList.forEach((function(e){e.check=!1}))}})},chooseWorker:function(t){var n=this.workerList[t];n.check=!this.workerList[t].check,e.log(n),this.workerList.splice(t,1,n)},chooseType:function(e){var t=this.worktypeOption[e];t.check=!this.worktypeOption[e].check,this.worktypeOption.splice(e,1,t)},chooseMachine:function(e){var t=this.machineOption[e];t.check=!this.machineOption[e].check,this.machineOption.splice(e,1,t)},toHome:function(){uni.navigateTo({url:"/pages/index/index"})},submit:function(){uni.showLoading({title:"加载中..."});var t=this,n=[];t.allPosition.forEach((function(e){e.workers.forEach((function(e){e.check&&n.push(e.ID)}))}));var a=[];t.worktypeOption.forEach((function(e){e.check&&a.push(e.name)}));var i=[];t.worktypeOption.forEach((function(e){e.check&&i.push(e.name)}));var o=[];t.machineOption.forEach((function(e){e.check&&o.push(e.name+e.number+"部")}));var r=[];t.imgs.forEach((function(e){var t=e.base64.split("base64,")[1];r.push(t)}));var s="",c=this.otherHead.filter((function(e){return e.head}));c=c.filter((function(e){var t=e.position.every((function(e){return!e.check}));return!t})),c.forEach((function(e){s+=e.head+":";var t="";e.position.forEach((function(e){e.check&&(t+=e.position+e.number+"人,")})),s+=t.slice(0,-1)+";"}));var d=this.oldWorkerIds.filter((function(e){return-1==n.indexOf(e)})),u={workerIds:n,siteId:this.attendenceData.siteId,supervisorId:parseInt(this.attendenceData.supervisorId),startTimestamp:this.attendenceData.startTimestamp,endTimestamp:this.attendenceData.endTimestamp,time:this.attendenceData.time,subcontract:this.attendenceData.subcontract?this.attendenceData.subcontract:" ",rporsubCRP:this.attendenceData.rporsubCRP,machine:o.join(),description:t.attendenceData.description,worktype:i.join(),base64Images:r,remark:s,removeImageId:t.delImgs,removeWorkerIds:d};e.log(u),uni.request({url:t.baseURL+"attendence/"+this.$route.query.id,method:"PUT",header:{Authorization:uni.getStorageSync("token")},data:u,success:function(t){e.log("编辑",t),t.data.error?uni.showToast({title:"編輯失敗",icon:"none"}):uni.navigateTo({url:"/pages/record/completeEdit"})},fail:function(){uni.showToast({title:"編輯失敗",icon:"none"})},complete:function(){uni.hideLoading()}})},cpimgOk:function(t){var n=this;e.log(t);var a=this;t.forEach((function(e){if(e.includes("blob")){var t=new Image;t.src=e,t.onload=function(){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);var i=t.src.substring(t.src.lastIndexOf(".")+1).toLowerCase(),o=e.toDataURL("image/"+i);a.imgs.push({base64:o})}}else n.imgs.push({base64:e})}))},chooseImg:function(){var e=this;return e.$refs.cpimg._changImg(),!1},onChangeHead:function(t){e.log(t,this.head)}}});t.default=o}).call(this,n("5a52")["default"])},"61f2":function(e,t,n){e.exports=n.p+"static/img/logo.c71ee8a6.png"},6707:function(e,t,n){"use strict";var a=n("d500"),i=n.n(a);i.a},"96cf":function(e,t){!function(t){"use strict";var n,a=Object.prototype,i=a.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",d="object"===typeof e,u=t.regeneratorRuntime;if(u)d&&(e.exports=u);else{u=t.regeneratorRuntime=d?e.exports:{},u.wrap=k;var l="suspendedStart",h="suspendedYield",f="executing",p="completed",v={},m={};m[r]=function(){return this};var g=Object.getPrototypeOf,b=g&&g(g(O([])));b&&b!==a&&i.call(b,r)&&(m=b);var w=E.prototype=A.prototype=Object.create(m);C.prototype=w.constructor=E,E.constructor=C,E[c]=C.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(w),e},u.awrap=function(e){return{__await:e}},x(I.prototype),I.prototype[s]=function(){return this},u.AsyncIterator=I,u.async=function(e,t,n,a){var i=new I(k(e,t,n,a));return u.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(w),w[c]="Generator",w[r]=function(){return this},w.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},u.values=O,Q.prototype={constructor:Q,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(a,i){return s.type="throw",s.arg=e,t.next=a,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],s=r.completion;if("root"===r.tryLoc)return a("end");if(r.tryLoc<=this.prev){var c=i.call(r,"catchLoc"),d=i.call(r,"finallyLoc");if(c&&d){if(this.prev<r.catchLoc)return a(r.catchLoc,!0);if(this.prev<r.finallyLoc)return a(r.finallyLoc)}else if(c){if(this.prev<r.catchLoc)return a(r.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return a(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;L(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:O(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=n),v}}}function k(e,t,n,a){var i=t&&t.prototype instanceof A?t:A,o=Object.create(i.prototype),r=new Q(a||[]);return o._invoke=D(e,n,r),o}function y(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(a){return{type:"throw",arg:a}}}function A(){}function C(){}function E(){}function x(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function I(e){function t(n,a,o,r){var s=y(e[n],e,a);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"===typeof d&&i.call(d,"__await")?Promise.resolve(d.__await).then((function(e){t("next",e,o,r)}),(function(e){t("throw",e,o,r)})):Promise.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return t("throw",e,o,r)}))}r(s.arg)}var n;function a(e,a){function i(){return new Promise((function(n,i){t(e,a,n,i)}))}return n=n?n.then(i,i):i()}this._invoke=a}function D(e,t,n){var a=l;return function(i,o){if(a===f)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw o;return G()}n.method=i,n.arg=o;while(1){var r=n.delegate;if(r){var s=B(r,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===l)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=f;var c=y(e,t,n);if("normal"===c.type){if(a=n.done?p:h,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=p,n.method="throw",n.arg=c.arg)}}}function B(e,t){var a=e.iterator[t.method];if(a===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,B(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=y(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,v;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Q(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function O(e){if(e){var t=e[r];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){while(++a<e.length)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:G}}function G(){return{value:n,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},b9f0:function(e,t){e.exports="data:image/png;base64,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"},baa5:function(e,t,n){var a=n("23e7"),i=n("e58c");a({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},c964:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));n("d3b7"),n("e6cf");function a(e,t,n,a,i,o,r){try{var s=e[o](r),c=s.value}catch(d){return void n(d)}s.done?t(c):Promise.resolve(c).then(a,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var r=e.apply(t,n);function s(e){a(r,i,o,s,c,"next",e)}function c(e){a(r,i,o,s,c,"throw",e)}s(void 0)}))}}},c9e9:function(e,t,n){"use strict";n.r(t);n("a4d3"),n("c975"),n("b64b");function a(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}function i(e,t){if(null==e)return{};var n,i,o=a(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,"default",(function(){return i}))},d500:function(e,t,n){var a=n("1efb");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("4f06").default;i("7d06ab18",a,!0,{sourceMap:!1,shadowMode:!1})},f224:function(e,t,n){"use strict";n.r(t);var a=n("609d"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a}}]);